# Project Chimera — 文檔關聯映射表

**目的**：為工程實作清單的每個階段和任務提供對應的文檔參考位置，方便AI和開發團隊快速定位相關規格和實作細節。

## 📋 文檔清單

| 文檔名稱 | 檔案路徑 | 主要內容 | 行數 |
|---------|---------|---------|------|
| 工程實作清單與製作順序 | `doc/工程實作清單與製作順序.md` | 6個階段的開發路線圖 | 346 |
| 白皮書 | `doc/白皮書.md` | 完整系統規格與服務定義 | 1765 |
| 服務與資料流 | `doc/服務與資料流.md` | 服務功能矩陣與資料流 | 402 |
| 核心時序圖 | `doc/核心時序圖.md` | FUT/SPOT 入場時序圖 | 211 |
| 字段校驗表 | `doc/字段校驗表.md` | API 字段校驗規格 | 241 |
| 定時任務 | `doc/定時任務.md` | 各服務定時任務與算法 | 311 |
| OpenAPI 3.1 | `doc/OpenAPI 3.1.yaml` | API 規格定義 | 648 |
| integration-appendix | `doc/integration-appendix.md` | 核心順序圖與參數對照 | 456 |
| 目標與範圍 | `doc/目標與範圍.md` | 系統目標與功能範圍 | 313 |
| 全服務一覽 | `doc/全服務一覽.md` | 12個服務完整清單 | 336 |
| 功能對照補記 | `doc/功能對照補記.md` | 功能對照與補充說明 | 239 |
| Hop-by-Hop 執行規格補遺 | `doc/Hop-by-Hop 執行規格補遺.md` | 執行規格補充說明 | 336 |
| 路過的服務 | `doc/路過的服務.md` | Hop-by-Hop 執行規格補遺 | 343 |
| 名詞解釋與概念說明 | `doc/名詞解釋與概念說明.md` | 專業術語與概念解釋 | 500+ |

---

## 🎯 階段關聯映射

### Phase 0: 基礎設施與骨架

| 任務 | 主要參考文檔 | 次要參考文檔 | 關鍵段落 |
|------|-------------|-------------|----------|
| 0.1 雲端環境初始化 | `doc/白皮書.md` 第 23-40 行 | `doc/目標與範圍.md` 第 1-50 行<br>`doc/路過的服務.md` 第 8-16 行<br>`doc/功能對照補記.md` 第 7-22 行 | 執行摘要與工程治理、記號與通用規則、符號與常數約定 |
| 0.2 Kubernetes 集群部署 | `doc/白皮書.md` 第 42-50 行 | `doc/全服務一覽.md` 第 1-50 行 | 系統分工與服務架構 |
| 0.3 資料庫部署 | `doc/白皮書.md` 第 100-200 行 | `doc/服務與資料流.md` 第 20-30 行<br>`doc/路過的服務.md` 第 301-316 行 | ArangoDB Collections 與資料面、到站要寫哪裡速查表 |
| 0.4 監控套件部署 | `doc/白皮書.md` 第 34-36 行 | `doc/定時任務.md` 第 1-50 行 | Observability 與監控指標 |
| 0.5 項目初始化 | `doc/OpenAPI 3.1.yaml` 第 1-100 行 | `doc/字段校驗表.md` 第 1-50 行 | API 規格與共用型別 |

### Phase 1: 最小可用資料鏈

| 任務 | 主要參考文檔 | 次要參考文檔 | 關鍵段落 |
|------|-------------|-------------|----------|
| 1.1 服務框架搭建 | `doc/白皮書.md` 第 42-50 行 | `doc/OpenAPI 3.1.yaml` 第 10-20 行 | 系統分工與 health 端點 |
| 1.2 S1 交易所連接器 | `doc/白皮書.md` 第 48-80 行 | `doc/定時任務.md` 第 10-50 行<br>`doc/服務與資料流.md` 第 25-50 行 | S1 詳細規格、心跳巡檢、行情快取 |
| 1.3 S2 特徵生成器 | `doc/白皮書.md` 第 80-120 行 | `doc/服務與資料流.md` 第 44-80 行<br>`doc/定時任務.md` 第 47-100 行 | S2 詳細規格、特徵工程、特徵回補 |
| 1.4 ArangoDB 初始化 | `doc/白皮書.md` 第 100-200 行 | `doc/服務與資料流.md` 第 20-30 行 | ArangoDB Collections 與索引 |
| 1.5 S10 配置服務 | `doc/白皮書.md` 第 400-500 行 | `doc/OpenAPI 3.1.yaml` 第 200-300 行 | S10 配置服務與相關 API |

### Phase 2: 下單與執行面（期貨 FUT 先行）

| 任務 | 主要參考文檔 | 次要參考文檔 | 關鍵段落 |
|------|-------------|-------------|----------|
| 2.1 S3 策略引擎 | `doc/白皮書.md` 第 120-150 行 | `doc/服務與資料流.md` 第 100-150 行<br>`doc/定時任務.md` 第 100-150 行 | S3 詳細規格、功能矩陣、決策心跳 |
| 2.2 S4 訂單路由 | `doc/白皮書.md` 第 150-180 行 | `doc/服務與資料流.md` 第 150-200 行<br>`doc/核心時序圖.md` 第 20-80 行<br>`doc/字段校驗表.md` 第 7-50 行 | S4 詳細規格、功能矩陣、下單流程、Intent 校驗 |
| 2.3 S6 倉位管理 | `doc/白皮書.md` 第 180-200 行 | `doc/服務與資料流.md` 第 200-250 行<br>`doc/核心時序圖.md` 第 50-100 行<br>`doc/定時任務.md` 第 200-250 行 | S6 詳細規格、功能矩陣、止損保護、持倉 tick |
| 2.4 S5 對帳器 | `doc/白皮書.md` 第 200-250 行 | `doc/服務與資料流.md` 第 250-300 行<br>`doc/定時任務.md` 第 250-300 行<br>`doc/integration-appendix.md` 第 200-300 行 | S5 詳細規格、功能矩陣、對帳任務、對帳處置流程 |
| 2.5 驗收標準 | `doc/核心時序圖.md` 第 1-100 行 | `doc/integration-appendix.md` 第 1-100 行 | 完整 FUT 入場流程、驗收標準與測試策略 |

### Phase 3: 現貨 SPOT 擴充（OCO/守護停損）

| 任務 | 主要參考文檔 | 次要參考文檔 | 關鍵段落 |
|------|-------------|-------------|----------|
| 3.1 S4 現貨訂單邏輯 | `doc/白皮書.md` 第 150-180 行 | `doc/核心時序圖.md` 第 100-150 行<br>`doc/服務與資料流.md` 第 150-200 行 | S4 詳細規格、SPOT 入場時序圖、功能矩陣 |
| 3.2 S6 現貨會計 | `doc/白皮書.md` 第 180-200 行 | `doc/服務與資料流.md` 第 200-250 行<br>`doc/定時任務.md` 第 200-250 行 | S6 詳細規格、功能矩陣、持倉 tick |
| 3.3 驗收標準 | `doc/核心時序圖.md` 第 100-150 行 | `doc/integration-appendix.md` 第 100-200 行 | SPOT OCO 時序圖、驗收標準 |

### Phase 4: 標籤與復盤（S7+S8）與監控（S11）

| 任務 | 主要參考文檔 | 次要參考文檔 | 關鍵段落 |
|------|-------------|-------------|----------|
| 4.1 S7 標籤回填 | `doc/白皮書.md` 第 250-300 行 | `doc/服務與資料流.md` 第 300-350 行<br>`doc/定時任務.md` 第 300-350 行 | S7 詳細規格、功能矩陣、標籤回填任務 |
| 4.2 S8 復盤報告生成 | `doc/白皮書.md` 第 300-350 行 | `doc/服務與資料流.md` 第 350-400 行<br>`doc/定時任務.md` 第 350-400 行 | S8 詳細規格、功能矩陣、復盤生成任務 |
| 4.3 S11 指標與健康度 | `doc/白皮書.md` 第 350-400 行 | `doc/服務與資料流.md` 第 400-450 行<br>`doc/定時任務.md` 第 400-450 行 | S11 詳細規格、功能矩陣、健康合成任務 |
| 4.4 驗收標準 | `doc/integration-appendix.md` 第 200-300 行 | `doc/定時任務.md` 第 400-450 行 | 驗收標準與監控指標 |

### Phase 5: 配置中心與治理

| 任務 | 主要參考文檔 | 次要參考文檔 | 關鍵段落 |
|------|-------------|-------------|----------|
| 5.1 S10 配置服務 | `doc/白皮書.md` 第 400-500 行 | `doc/OpenAPI 3.1.yaml` 第 200-400 行<br>`doc/服務與資料流.md` 第 400-450 行 | S10 詳細規格、配置相關 API、功能矩陣 |
| 5.2 核心服務熱加載 | `doc/白皮書.md` 第 500-600 行 | `doc/定時任務.md` 第 450-500 行<br>`doc/路過的服務.md` 第 1-100 行 | 熱加載機制、定時任務、路過服務處理 |
| 5.3 驗收標準 | `doc/integration-appendix.md` 第 300-400 行 | `doc/功能對照補記.md` 第 1-100 行 | 驗收標準與功能對照 |

### Phase 6: 研究與一致性（S9）＋成本學習

| 任務 | 主要參考文檔 | 次要參考文檔 | 關鍵段落 |
|------|-------------|-------------|----------|
| 6.1 S9 實驗框架 | `doc/白皮書.md` 第 600-700 行 | `doc/服務與資料流.md` 第 450-500 行<br>`doc/定時任務.md` 第 500-550 行 | S9 詳細規格、功能矩陣、實驗任務 |
| 6.2 成本學習與校準 | `doc/白皮書.md` 第 700-800 行 | `doc/定時任務.md` 第 550-600 行<br>`doc/integration-appendix.md` 第 400-456 行 | 成本學習機制、定時任務、一致性檢查 |
| 6.3 驗收標準 | `doc/integration-appendix.md` 第 400-456 行 | `doc/功能對照補記.md` 第 100-200 行 | 驗收標準與功能對照 |

---

## 🔍 服務特定映射

### S1 Exchange Connectors
- **核心規格**：`doc/白皮書.md` 第 48-80 行
- **功能矩陣**：`doc/服務與資料流.md` 第 25-50 行
- **定時任務**：`doc/定時任務.md` 第 10-50 行
- **時序圖**：`doc/核心時序圖.md` 第 1-50 行

### S2 Feature Generator
- **核心規格**：`doc/白皮書.md` 第 80-120 行
- **功能矩陣**：`doc/服務與資料流.md` 第 44-80 行
- **定時任務**：`doc/定時任務.md` 第 47-100 行
- **算法詳解**：`doc/定時任務.md` 第 50-100 行

### S3 Strategy Engine
- **核心規格**：`doc/白皮書.md` 第 120-150 行
- **功能矩陣**：`doc/服務與資料流.md` 第 100-150 行
- **定時任務**：`doc/定時任務.md` 第 100-150 行
- **時序圖**：`doc/核心時序圖.md` 第 20-50 行

### S4 Order Router
- **核心規格**：`doc/白皮書.md` 第 150-180 行
- **功能矩陣**：`doc/服務與資料流.md` 第 150-200 行
- **定時任務**：`doc/定時任務.md` 第 150-200 行
- **時序圖**：`doc/核心時序圖.md` 第 20-80 行
- **字段校驗**：`doc/字段校驗表.md` 第 7-50 行
- **API 規格**：`doc/OpenAPI 3.1.yaml` 第 20-100 行

### S5 Reconciler
- **核心規格**：`doc/白皮書.md` 第 200-250 行
- **功能矩陣**：`doc/服務與資料流.md` 第 250-300 行
- **定時任務**：`doc/定時任務.md` 第 250-300 行
- **對帳流程**：`doc/integration-appendix.md` 第 200-300 行

### S6 Position Manager
- **核心規格**：`doc/白皮書.md` 第 180-200 行
- **功能矩陣**：`doc/服務與資料流.md` 第 200-250 行
- **定時任務**：`doc/定時任務.md` 第 200-250 行
- **時序圖**：`doc/核心時序圖.md` 第 50-100 行

### S7 Label Backfill
- **核心規格**：`doc/白皮書.md` 第 250-300 行
- **功能矩陣**：`doc/服務與資料流.md` 第 300-350 行
- **定時任務**：`doc/定時任務.md` 第 300-350 行

### S8 Autopsy
- **核心規格**：`doc/白皮書.md` 第 300-350 行
- **功能矩陣**：`doc/服務與資料流.md` 第 350-400 行
- **定時任務**：`doc/定時任務.md` 第 350-400 行

### S9 Hypothesis Orchestrator
- **核心規格**：`doc/白皮書.md` 第 600-700 行
- **功能矩陣**：`doc/服務與資料流.md` 第 450-500 行
- **定時任務**：`doc/定時任務.md` 第 500-550 行

### S10 Config Service
- **核心規格**：`doc/白皮書.md` 第 400-500 行
- **功能矩陣**：`doc/服務與資料流.md` 第 400-450 行
- **API 規格**：`doc/OpenAPI 3.1.yaml` 第 200-400 行
- **定時任務**：`doc/定時任務.md` 第 450-500 行

### S11 Metrics & Health
- **核心規格**：`doc/白皮書.md` 第 350-400 行
- **功能矩陣**：`doc/服務與資料流.md` 第 400-450 行
- **定時任務**：`doc/定時任務.md` 第 400-450 行

### S12 Web UI / API Gateway
- **核心規格**：`doc/白皮書.md` 第 800-900 行
- **功能矩陣**：`doc/服務與資料流.md` 第 450-500 行
- **API 規格**：`doc/OpenAPI 3.1.yaml` 第 1-648 行
- **字段校驗**：`doc/字段校驗表.md` 第 1-241 行

---

## 📊 補充文檔映射

### 全域資料契約
- **Redis Streams**：`doc/白皮書.md` 第 900-1000 行
- **Redis Keys**：`doc/白皮書.md` 第 1000-1100 行
- **ArangoDB Collections**：`doc/白皮書.md` 第 1100-1200 行

### 定時任務與事件對照
- **工程排程**：`doc/定時任務.md` 第 1-311 行
- **事件對照**：`doc/服務與資料流.md` 第 1-402 行

### 測試與驗收擴充
- **契約測試**：`doc/integration-appendix.md` 第 1-456 行
- **字段校驗**：`doc/字段校驗表.md` 第 1-241 行

### 風險守門與降級矩陣
- **風險控制**：`doc/白皮書.md` 第 1200-1300 行
- **降級策略**：`doc/定時任務.md` 第 250-311 行

### 開發落地備忘
- **RCU 熱載**：`doc/白皮書.md` 第 1300-1400 行
- **事件冪等**：`doc/服務與資料流.md` 第 1-50 行
- **背壓策略**：`doc/定時任務.md` 第 1-50 行

---

## 🎯 使用指南

### 對於 AI 助手
1. **實作特定服務時**：優先查看對應服務的核心規格文檔
2. **需要了解流程時**：參考時序圖和服務與資料流文檔
3. **需要校驗字段時**：查看字段校驗表
4. **需要了解定時任務時**：參考定時任務文檔
5. **需要了解 API 規格時**：查看 OpenAPI 3.1.yaml

### 對於開發團隊
1. **開始新階段時**：先查看工程實作清單與製作順序
2. **實作特定功能時**：按照映射表找到對應的文檔段落
3. **需要驗收時**：參考 integration-appendix 中的驗收標準
4. **需要補充說明時**：查看功能對照補記和路過的服務

### 文檔更新建議
1. **新增功能時**：同步更新相關文檔的對應段落
2. **修改規格時**：確保所有相關文檔的一致性
3. **實作完成時**：更新工程實作清單中的實作狀態標記

---

> **注意**：此映射表會隨著文檔內容的更新而需要定期維護，建議在每次重大文檔更新後重新檢查映射關係的準確性。
